<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Livewire</title>
	<link rel="icon" href="../../../../media/book.ico">
	<link rel="stylesheet" href="../../../styles.css">
</head>
<body>
	<h1>
        Capítulo 1
		<br>
		Parte 2
        <br>
        <span id="c1p2"></span>
    </h1>
	
	<a class="return" href="../chapter.html">Volver al capitulo</a>

	<hr>

	<cite>"Haste un favor a ti mismo, y simplifica tu vida."</cite>

	<!-- Directiva @livewire -->
	<h3>Directiva @livewire</h3>
	<p>
		Para la gran mayoría de casos, vamos a nesecitar que solo cierta secciones de una pagina sean reactivas. En esta situacion es común llamar a los componentes de Livewire con esta directiva Blade.
	</p>
	<p>
		Ella recibe el nombre de un componente en minusculas y separado por guiones para renderizarlo. Por ejemplo, un componente cuya clase es <code>ShowPosts</code> se redenriza de esta forma:
	</p>
	<!-- code -->
	<code>@livewire('show-posts')</code>

	<p>
		Esta directiva también acepta como segundo parametro un arreglo con información para el componente.
	</p>
	<!-- code -->
	<code>@livewire('show-posts', ['information' => $value])</code>

	<p>
		Si le pasamos información a la directiva, también debemos recibirla en la Clase del componente. Simplemente le agregamos un atributo a la clase <code>ShowPosts</code>:
	</p>
	<!-- code -->
	<code>public $information;</code>

	<p>
		Dentro de esta propiedad va a quedar almacenada la informacion que le pasamos en la variable <code>$value</code>.
	</p>

	<!-- Atributos de Clase -->
	<h3>Atributos de Clase</h3>
	<p>
		Cualquier atributo de la Clase de un componente puede ser accedido desde su vista. Por ejemplo, la propiedad <code>$information</code> de la clase <code>ShowPosts</code> puede ser accedida directamente en la vista <code>show-posts</code> del componente con las llaves de Blade:
	</p>
	<!-- code -->
	<code>{{$information}}</code>

	<p>
		Podemos usar el metodo <code>mount()</code> de la Clase para recibir una variable por la directiva <code>@livewire</code> y asignarle su valor a un atributo.
	</p>
	<!-- image -->
	<img src="media/mount_method.png">

	<p>
		De esta forma le pasamos la variable <code>$title</code> a la directiva <code>@livewire</code>:
	</p>
	<!-- code -->
	<code>@livewire('show-post', ['title' => 'Titulo Importante'])</code>

	<p>
		Y renderizamos ese valor en la vista del componente usando el atributo <code>$information</code> donde fue montado:
	</p>
	<!-- image -->
	<img src="media/rendering_title.png">
	
	<!-- Componente como controlador -->
	<h3>Componente como controlador</h3>
	<p>
		En el otro caso cuando deseamos que toda la pagina sea reactiva, no es conveniente hacer uso de los componentes con <code>@livewire</code>. Porque nos obligaría a crear una vista y un controlador innecesarios cuya única finalidad es renderizar el componente de Livewire.
	</p>
	<p>
		En lugar de aquello, podemos usar el componente como si fuera un controlador en las rutas:
	</p>
	<!-- code -->
	<code>
		use App\Livewire\Counter; <br>
		Route::get('/counter', Counter::class);
	</code>

	<p>
		El componente va a buscar por defecto la plantilla <code>resources/views/components/layouts/app.blade.php</code> para renderizarse automaticamente en la variable <code>$slot</code>.
	</p>
	<p>
		Si deseamos cambiar la plantilla por defecto en la cual se renderiza el componente cuando lo usamos de desta forma, devemos encadenar el metodo <code>layout()</code> y pasarle la plantilla que deseamos usar:
	</p>
	<!-- image -->
	<img src="media/default_layout_changed.png">
	
	<!-- Recibir parametro por la URL -->
	<h3>Recibir parametro por la URL</h3>
	<p>
		Cuando usamos un componente como controlador en las rutas, puede darse el caso donde la ruta reciba un parametro.
	</p>
	<!-- code -->
	<code>Route::middleware(['auth'])->get('/counter/{step}', Counter::class);</code>

	<p>
		Para recibir esta información en el componente simplemente agregamos una la propiedad correspondiente a la Clase:
	</p>
	<!-- code -->
	<code>public $step;</code>

	<p>
		O alternativamente usamos el metodo <code>mount()</code>:
	</p>
	<!-- image -->
	<img src="media/receiving_parameter.png">
	
	<!-- Obtener datos de la DB -->
	<h3>Obtener datos de la DB</h3>
	<p>
		Para recuperar datos de la Base de Datos en un componente, hacemos exactamente los mismo que haríamos como si se tratase de un controlador:
	</p>
	<!-- image -->
	<img src="media/recovering_information_of_db.png">

	<p>
		Los mostramos en la vista del componente:
	</p>
	<!-- image -->
	<img src="media/showing_information_of_db.png">

	<p>
		Y finalmente el resultado es identico a usar un controlador:
	</p>
	<!-- image -->
	<img src="media/information_of_db.png">

	<!--  -->
	<h3></h3>
	<p></p>
	<!-- code -->
	<code></code>

	<script src="../../../script.js"></script>
</body>
</html>