<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Livewire</title>
	<link rel="icon" href="../../../../media/book.ico">
	<link rel="stylesheet" href="../../../styles.css">
</head>
<body>
	<h1>
        Capítulo 1
		<br>
		Parte 3
        <br>
        <span id="c1p3"></span>
    </h1>
	
	<a class="return" href="../chapter.html">Volver al capitulo</a>

	<hr>

	<cite>"Haste un favor a ti mismo, y simplifica tu vida."</cite>

	<!-- Directiva wire:model.live -->
	<h3>Directiva wire:model.live</h3>
	<p>
		Esta directiva HTML de Livewire sirve para sincronizar en tiempo real el contenido que el usuario escribe en un input del componente, con el valor de un atributo de la clase del componente.
	</p>
	<p>
		Por ejemplo, si definimos el atributo <code>$search</code> en la Clase del componente, podemos sincronizar su valor en tiempo real agregando esta directiva a un input que se encuentre en la vista del componente:
	</p>
	<!-- code -->
	<code>wire:model.live="search"</code>

	<p>
		De esta manera cada vez que el usuario escriba una letra en el lado del cliente, se enviará una petición que actualizará el valor de <code>$search</code> en el lado del servidor.
	</p>
	
	<!-- Ejemplo de buscador -->
	<h3>Ejemplo de buscador</h3>
	<p>
		Con la directiva HTML <code>wire:model.live</code> de Livewire podemos crear un buscador de forma superfacil. Simplemente agregamos un filtro a la consulta usando el valor de la propiedad <code>$search</code>:
	</p>
	<!-- image -->
	<img src="media/posts_searcher.png">

	<p>
		Así de facil con Livewire, <strong>¡Ahora tenemos un buscador en tiempo real!</strong>
	</p>

	<!-- Directiva wire:click -->
	<h3>Directiva wire:click</h3>
	<p>
		Esta directiva HTML de Livewire sirve para ejecutar un metodo de la Clase del componente cuando el usuario hace un click en un elemento y, despues de la ejecución, volver a renderizar el componente.
	</p>
	<p>
		Recibe un metodo de la Clase del componente y, en el caso de que este metodo reciba parametros, estos se pasan por aquí igualmente:
	</p>
	<!-- code -->
	<code>wire:click="method('param1_value', 'param2_value' ... , 'paramN_value')"</code>
	
	<!-- Ejemplo de ordenador -->
	<h3>Ejemplo de ordenador</h3>
	<p>
		Simplemente con dos atributos (<code>$sort</code> y <code>$direction</code>) y dos metodos en la Clase del componente, además de algunas modificaciones en la vista, podemos construir facilmente un ordenador. Primero agregamos los dos atributos a la Clase del componente:
	</p>
	<!-- code -->
	<code>
		public $sort = 'id', <br>
		public $direction = 'asc';
	</code>

	<p>
		A continuación debemos agregar un metodo, en este caso <code>order()</code>, que controle el valor de estos atributos cuando el usuario interactua con la vista del componente:
	</p>
	<!-- image -->
	<img src="media/order_method.png">

	<p>
		Finalmente en la vista, a parte de estilizarla con los iconos de ordenamiento, debemos agregar la directiva HTML <code>wire:click</code> de Livewire a cada encabezado de la tabla.
	</p>
	<p>
		Le indicamos que ejecute el método <code>order()</code>, y a este metodo le pasamos el nombre de la columna para que el servidor pueda saber cúal es la columna en la que debe basarse para ordenar los registros.
	</p>
	<!-- code -->
	<code>wire:click="order('<em>column_name</em>')"</code>

	<p>
		Hecho esto, lo que resta es utilizar los atributos <code>$sort</code> y <code>$direction</code> para ingeniosamente mostrar los iconos corectamente según sea la nesecidad.
	</p>
	<!-- image -->
	<img src="media/orderer_view.png">

	<p>
		El resultado es que ahora podemos ordenar los registros con un click en la columna, y además, en ambos sentidos:
	</p>
	<!-- image -->
	<img src="media/orderer_result.png">
	
	<!--  -->
	<h3></h3>
	<p></p>
	<!-- code -->
	<code></code>

	<script src="../../../script.js"></script>
</body>
</html>