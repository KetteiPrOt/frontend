<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Parte 6</title>
	<link rel="icon" href="../../../media/book.ico">
	<link rel="stylesheet" href="../../styles.css">
</head>
<body>
	<h1 class="titulo-principal">Funciones</h1>
	<h4 class="enlace-volver"><a href="../capitulo2.html">Volver al capitulo</a></h4>
	<hr>

	<!-- Funciones predefinidas -->
	<h3>Funciones predefinidas</h3>
	<p>Son funciones que ya vienen con el lenguaje.</p>

	<!-- time() -->
	<h4>time()</h4>
	<p>
		Contiene valor numérico entero largo que representa el número de segundos transcurridos desde el 1 de enero de 1970 00:00:00 GMT.
	</p>
	<!-- codigo -->
	<code>echo "Marca de tiempo: " . time(); <strong>// Marca de tiempo: 1676307246</strong></code>

	<!-- sqrt() -->
	<h4>sqrt()</h4>
	<p>Esta funcion retorna la raiz cuadrada de un nuamero.</p>
	<!-- codigo -->
	<code>echo sqrt(25); <strong>// 5</strong></code>

	<!-- rand() -->
	<h4>rand()</h4>
	<p>Retorna un numero aleatorio en un intervalo especificado.</p>
	<!-- codigo -->
	<code>echo "Numero aleatorio entre 90 y 100: " . rand(90, 100); <strong>// Numero aleatorio entre 90 y 100: ??</strong></code>

	<!-- pi() -->
	<h4>pi()</h4>
	<p>Retorna el valor de PI.</p>
	<!-- codigo -->
	<code>echo pi(); <strong>// 3.1415926535898</strong></code>

	<!-- round() -->
	<h4>round()</h4>
	<p>Redondea un numero decimal.</p>
	<!-- codigo -->
	<code>
		echo round(2.5) . "&lt;br&gt;"; <strong>// 3</strong> <br><br>

        echo round(5.1); <strong>// 5</strong>
	</code>


	<!-- ceil() -->
	<h4>ceil()</h4>
	<p>Redondea un numero decimal siempre hacia arriba.</p>
	<!-- codigo -->
	<code>
		echo round(2.5) . "&lt;br&gt;"; <strong>// 3</strong> <br><br>

        echo round(5.1); <strong>// 6</strong>
	</code>


	<!-- Definir funciones -->
	<h3>Definir funciones</h3>
	<p>Las funciones se definen y retornan igual que en JavaScript.</p>
	<!-- codigo -->
	<code>
        function nombre($argumento) { <br>&nbsp&nbsp&nbsp
            // codigo <br>&nbsp&nbsp&nbsp
			return $resultado; <br>
        }
	</code>

	<p>Ejemplo de funcion para calcular el factorial de un numero:</p>
	<!-- codigo -->
	<code>
		$numero = 4; // 1 * 2 * 3 * 4 = 24 <br><br>

		function factorial($n) { <br>&nbsp&nbsp&nbsp
			$acumulador = 1; <br><br>&nbsp&nbsp&nbsp

			for ($i = 1; $i <= $n; $i++) { <br>&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp
				$acumulador *= $i; <br>&nbsp&nbsp&nbsp
			} <br><br> &nbsp&nbsp&nbsp

			return $acumulador; <br>
		} <br><br>

		echo factorial($numero); <strong>// 24</strong>
	</code>


	<!-- Ambitos de variables -->
	<h3>Ambitos de variables</h3>
	<p>
		En PHP existen dos tipos de variables: las variables globales y las variables locales. Las variables globales son las que se declaran en el programa o dentro de estructuras de control de flujo.
	</p>
	<p>
		Las funciones tienen un cuerpo delimitado por corchetes {}. Este cuerpo define un nuevo ambito de variables. Ninguna variable puede entrar ni salir de la funcion, a menos que sea por los argumentos, o se use la sentencia <em>return</em>. Las variables declaradas dentro de funciones se conocen como variables de ambito local.
	</p>
	<!-- codigo -->
	<code>
		$a = 5; <br><br>

		function y() { <br>&nbsp&nbsp&nbsp
			echo $a; <strong>// Error: $a is undefined</strong> <br>
		} <br><br>

		y();
	</code>

	<!-- Sentencia global -->
	<h3>Sentencia global</h3>
	<p>Sirve para acceder a una variable global.</p>
	<!-- codigo -->
	<code>
		$a = 5; <br><br>

		function y() { <br>&nbsp&nbsp&nbsp
			<strong>global</strong> $a; <br> &nbsp&nbsp&nbsp
			echo $a; <strong>// 5</strong> <br>
		} <br><br>

		y();
	</code>


	<!-- Argumentos opcionales de una funcion -->
	<h3>Argumentos opcionales de una funcion</h3>
	<p>
		Si al crear un argumento de una funcion le pasamos un valor por defecto, este argumento se volvera opcinal y en el caso de que no se lo pasemos simplemente tomara su valor por defecto.
	</p>
	<!-- codigo -->
	<code>
		function valoracion($curso, $puntuacion = 5) { <br> &nbsp&nbsp&nbsp
			echo "El $curso tiene una puntuacion de $puntuacion"; <br>
		} <br><br>

		valoracion("Curso de PHP 8"); <strong>// El Curso de PHP 8 tiene una puntuacion de 5</strong>
	</code>


	<!-- Argumentos variables de una funcion -->
	<h3>Argumentos variables de una funcion</h3>
	<p>Aveces no sabemos con exactitud cuantos argumentos va a recibir una funcion.</p>
	<p>
		En estos casos usamos el operador "..." para juntar automaticamente todos los datos que le pasemos en un solo array.
	</p>
	<p>Esta es una funcion que concatena palabras:</p>
	<!-- codigo -->
	<code>
		function concatenar(...$palabras) { <br> &nbsp&nbsp&nbsp
			$resultado = ""; <br> &nbsp&nbsp&nbsp
			foreach ($palabras as $palabra) { <br> &nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp
				$resultado .= " $palabra"; <br> &nbsp&nbsp&nbsp
			} <br> &nbsp&nbsp&nbsp
			return $resultado; <br>
		} <br><br>

		$mensaje = concatenar("Hola", "Mundo!", "Soy", "Joel", "Mero."); <br><br>
		
		echo $mensaje; <strong>// Hola Mundo! Soy Joel Mero</strong>
	</code>

	<p>Tambien se puede usar para pasar los elementos de un Arreglo en multiples variables (desgranarlo en variables xds):</p>
	<!-- codigo -->
	<code>
		$array = ["Joel", "Elaina-san", "Hotsuki", "Arc-en-Ciel"]; <br><br>
    
		function informacion(string $otaku, string $waifu, string $armaWaifu, string $armaOtaku): string <br>
		{ <br>&nbsp;&nbsp;&nbsp;
			$informacion = "Otaku: <strong>$otaku</strong> &lt;br&gt; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
							Waifu: <strong>$waifu</strong> &lt;br&gt; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
							Arma de la Waifu: <strong>$armaWaifu</strong> &lt;br&gt; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
							Arma del Otaku: <strong>$armaOtaku</strong>"; <br><br>&nbsp;&nbsp;&nbsp;
			
			return $informacion; <br>
		} <br><br>

		echo informacion(...$array); <br>
		<strong>
			// Otaku: Joel <br>
			// Waifu: Elaina-san <br>
			// Arma de la Waifu: Hotsuki <br>
			// Arma del Otaku: Arc-en-Ciel
		</strong>
	</code>


	<!-- Argumentos con tipado definido -->
	<h3>Argumentos con tipado definido</h3>
	<p>Podemos definir el tipo de argumentos que va a recibir una funcion escribiendo el tipo de dato antes del parametro.</p>
	<p>
		PHP va a intentar convertir el dato recibido al tipo de dato especificado. Por ejemplo a un decimal lo va a trucar a entero si el argumento es de tipo <em>int</em>.
	</p>
	<p>Tipos que se pueden especificar: <em>int, float, string, bool, array, object, null</em>.</p>
	<!-- codigo -->
	<code>
		function sumarEnteros (int $entero1, int $entero2) { <br><br> &nbsp&nbsp&nbsp

			$suma = $entero1 + $entero2; <br><br> &nbsp&nbsp&nbsp

			return $suma; <br>
		} <br><br>

		echo sumarEnteros(5, 6) . "&lt;br&gt;"; <strong>// 11</strong> <br><br>

		echo sumarEnteros(2, 5.4) . "&lt;br&gt;"; <strong>// 7</strong> <br><br>

		function sumarDecimales (float $decimal1, float $decimal2) { <br><br> &nbsp&nbsp&nbsp

			$suma = $decimal1 + $decimal2; <br><br> &nbsp&nbsp&nbsp

			return $suma; <br>
		} <br><br>

		echo sumarDecimales(5.1, 6.4); <strong>// 11.5</strong>
	</code>


	<!-- Argumentos de Clase definida -->
	<h3>Argumentos de Clase definida</h3>
	<p>
		Es posible definir que una funcion debe recibir obligatoriamente un objeto de una Clase especifica.
	</p>
	<p>
		Aqui le estoy diciendo que debe recibir un objeto de Clase <em>Bird</em>.
	</p>
	<!-- code -->
	<code>
		class Bird { <br>&nbsp;&nbsp;&nbsp;
			public $color = "amarillo", <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
				   $status = "pasivo", <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
				   $size = "pequenio"; <br>
		} <br><br>

		function seeInfo (Bird $bird1) { <br>&nbsp;&nbsp;&nbsp;
			echo $bird1->color; <br>&nbsp;&nbsp;&nbsp;
			<strong>// Amarillo </strong> <br>
		} <br><br>

		seeInfo(new Bird);
	</code>


	<!-- Tipado estricto -->
	<h3>Tipado estricto</h3>
	<p>Se usa cuando queremos que las funciones solo acepten argumentos del tipo de dato especificado.</p>
	<p>
		Usar el tipado estricto disminuye drasticamente los errores en los programas.
	</p>
	<p>
		La declaracion "strict_types = 1" debe ser la primera en el programa.
	</p>
	<!-- codigo -->
	<code>
		declare(strict_types = 1); <br><br>

		function sumarEnteros (int $entero1, int $entero2) { <br><br> &nbsp&nbsp&nbsp

			$suma = $entero1 + $entero2; <br><br> &nbsp&nbsp&nbsp

			return $suma; <br>
		} <br><br>

		echo sumarEnteros(5, 2.4); <strong>// (!) Error de tipado</strong>
	</code>


	<!-- Funciones con tipado definido -->
	<h3>Funciones con tipado definido</h3>
	<p>Podemos especificar el tipo de dato que debe retornar una funcion usando la siguiente sintaxis.</p>
	<p>
		Usando el tipado estricto si la funcion devuelve otro tipo de dato se producira un error.
	</p>
	<p>Tipos que se pueden especificar: <em>int, float, string, bool, array, object, null</em>.</p>
	<!-- codigo -->
	<code>
		declare(strict_types = 1); <br><br>

		function sumarEnteros (int $entero1, int $entero2): int <br>
		{ <br> &nbsp&nbsp&nbsp
			$suma = $entero1 + $entero2; <br><br> &nbsp&nbsp&nbsp
		
			return $suma/2; <strong>// 7/2 = 3.5</strong> <br>
		} <br><br>
		
		echo sumarEnteros(2, 5) ; <strong>// (!) Error de tipado</strong>
	</code>

	<p>Se puede adicionar mas tipos de datos que opcionalmente podria retornar con el operador "|".</p>
	<!-- codigo -->
	<code>
		declare(strict_types = 1); <br><br>

		function sumarEnteros (int $entero1, int $entero2): int | float <br>
		{ <br> &nbsp&nbsp&nbsp
			$suma = $entero1 + $entero2; <br><br> &nbsp&nbsp&nbsp
		
			return $suma/2; <br>
		} <br><br>
		
		echo sumarEnteros(2, 5) ; <strong>// 3.5</strong>
	</code>


	<!-- Funciones flecha -->
	<h3>Funciones flecha</h3>
	<p>Son una forma mas corta de escribir funciones anonimas normales. El return es implicito.</p>
	<!-- codigo -->
	<code>
		fn() => /* codigo */;
	</code>


	<!-- is_callable() -->
	<h3>is_callable()</h3>
	<p>Retorna verdadero si el contenido de una variable es una funcion o metodo ejecutable.</p>
	<!-- codigo -->
	<code>
		$array["cero"] = function () { <br>&nbsp;&nbsp;&nbsp;
			return "Hola Mundo!"; <br>
		}; <br><br>

		if (is_callable($array["cero"])) { <br><br>&nbsp;&nbsp;&nbsp;

			$funcion = $array["cero"]; <br>&nbsp;&nbsp;&nbsp;
			echo $funcion(); // Hola Mundo! <br><br>

		} else { <br>&nbsp;&nbsp;&nbsp;
			echo "No es una funcion"; <br>
		}
	</code>


	<!-- Funciones para archivos -->
	<h3>Funciones para archivos</h3>
	<p>Estas funciones son para trabajar con archivos.</p>

	<!-- requiere_once() -->
	<h4>requiere_once()</h4>
	<p>Importa un archivo requerido a la ejecucion del programa actual, si el archivo no existe o falla se produce un fatal error que acaba con la ejecucion del programa.</p>
	<!-- codigo -->
	<code>requiere_once("ruta_archivo");</code>

	<!-- include() -->
	<h4>include()</h4>
	<p>Icluira un archivo opcional a la ejecucion del programa actual (lo "incluye") desde la linea donde se ha realizado la inclusion, si el archivo no exite o no lo encuentra recibiremos una advertencia antes de fallar pero no impide la ejecucion del resto del programa.</p>
	<!-- codigo -->
	<code>include("ruta_archivo");</code>

	<!-- ob_start() -->
	<h4>ob_start()</h4>
	<p>Esta función activará el almacenamiento en búfer de la salida. Mientras dicho almacenamiento esté activo, no se enviará ninguna salida desde el script (aparte de cabeceras); en su lugar la salida se almacenará en un búfer interno.</p>
	<p>
		Se puede usar para capturar un documento HTML [funcion include("documento.html")] y obtener los datos del documento en una variable con la funcion de abajo.
	</p>

	<!-- ob_get_clean() -->
	<h4>ob_get_clean()</h4>
	<p>Obtiene el contenido del búfer actual y elimina el búfer de salida actual. Es un resumen de ejecutar las funciones ob_get_contents() y ob_end_clean().</p>

	<!--  -->
	<h4></h4>
	<p></p>
	<!-- codigo -->
	<code></code>


	<!--  -->
	<h3></h3>
	<p></p>
	<!-- codigo -->
	<code></code>

</body>
</html>